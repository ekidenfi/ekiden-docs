{"openapi":"3.1.0","info":{"title":"ekiden-gateway-api","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/api/v1/authorize":{"post":{"tags":["Auth"],"summary":"Authorize","description":"Authenticates a user and generates a JWT token for subsequent API calls. The user must provide a valid Ed25519 signature for message `AUTHORIZE` and public key. If the user doesn't exist, a new user account will be created.","operationId":"authorize","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeParams"}}},"required":true},"responses":{"200":{"description":"Successfully authorized and token generated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeResponse"}}}},"400":{"description":"Invalid signature or public key"},"500":{"description":"Internal server error"}}}},"/api/v1/candles":{"get":{"tags":["Market"],"summary":"Get candlestick data","description":"Retrieves candlestick (OHLCV) data for the specified market and timeframe. Used for creating trading charts.","operationId":"list_candles","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"timeframe","in":"query","required":true,"schema":{"type":"string"},"example":"1h"},{"name":"start_time","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"},"example":1640995200},{"name":"end_time","in":"query","required":false,"schema":{"type":["integer","null"],"format":"int64"},"example":1641081600},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved candlestick data","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CandleResponse"}}}}},"400":{"description":"Invalid timeframe or parameters"},"500":{"description":"Internal server error"}}}},"/api/v1/candles/stats/{market_addr}":{"get":{"tags":["Market"],"summary":"Get market statistics","description":"Retrieves 24-hour market statistics including price change, volume, and trading activity.","operationId":"get_market_stats","parameters":[{"name":"market_addr","in":"path","description":"Market address","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"}],"responses":{"200":{"description":"Successfully retrieved market statistics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketStatsResponse"}}}},"404":{"description":"Market not found"},"500":{"description":"Internal server error"}}}},"/api/v1/deposits":{"get":{"tags":["Transaction"],"summary":"Get deposits","description":"Retrieves a list of deposits based on filter criteria. Can filter by user address, vault address, asset address, and version range.","operationId":"list_deposits","parameters":[{"name":"user_addr","in":"query","description":"User address to filter deposits by","required":false,"schema":{"type":["string","null"]},"example":"0x1234567890abcdef..."},{"name":"vault_addr","in":"query","description":"Vault address to filter deposits by","required":false,"schema":{"type":["string","null"]},"example":"0xabcdef1234567890..."},{"name":"asset_addr","in":"query","description":"Asset address to filter deposits by","required":false,"schema":{"type":["string","null"]},"example":"0x9876543210fedcba..."},{"name":"start_version","in":"query","description":"Start version for filtering (inclusive)","required":false,"schema":{"type":["integer","null"],"format":"int64","minimum":0},"example":1000},{"name":"end_version","in":"query","description":"End version for filtering (inclusive)","required":false,"schema":{"type":["integer","null"],"format":"int64","minimum":0},"example":2000},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of deposits","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DepositResponse"}}}}},"400":{"description":"Bad request - Invalid parameters"},"500":{"description":"Internal server error"}}}},"/api/v1/fills":{"get":{"tags":["Market"],"summary":"Get recent fills","description":"Retrieves a list of recent fills (executed trades) in the specified market.","operationId":"list_fills","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of fills","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FillResponse"}}}}},"500":{"description":"Internal server error"}}}},"/api/v1/funding_rate":{"get":{"tags":["Market"],"summary":"Get funding rate","description":"Retrieves the current funding rate calculated using configurable parameters. Funding rate indicates the cost of holding perpetual positions.","operationId":"get_funding_rates","parameters":[{"name":"market_addr","in":"query","description":"Market address to get funding rate for","required":false,"schema":{"type":["string","null"]},"example":"0x1234567890abcdef..."},{"name":"symbol","in":"query","description":"Symbol to get funding rate for (alternative to market_addr)","required":false,"schema":{"type":["string","null"]},"example":"BTC-USD"}],"responses":{"200":{"description":"Successfully retrieved funding rate(s)","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FundingRateResponse"}}}}},"404":{"description":"Market not found"},"500":{"description":"Internal server error"}}}},"/api/v1/funding_rate/epoch":{"get":{"tags":["Market"],"summary":"Get current funding epoch","description":"Returns the current funding epoch timestamp with configurable interval.","operationId":"get_funding_epoch","parameters":[{"name":"funding_interval_seconds","in":"query","description":"Funding interval in seconds","required":false,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Current funding epoch","content":{"text/plain":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error"}}}},"/api/v1/funding_rate/{market_addr}":{"get":{"tags":["Market"],"summary":"Get funding rate by market address","description":"Retrieves the current funding rate for a specific market with configurable parameters.","operationId":"get_funding_rate_by_market","parameters":[{"name":"market_addr","in":"path","description":"Market address","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully retrieved funding rate","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FundingRateResponse"}}}},"404":{"description":"Market not found"},"500":{"description":"Internal server error"}}}},"/api/v1/market_info":{"get":{"tags":["Market"],"summary":"Get market information","description":"Retrieves market information. Can filter by market address or symbol, or get all markets with pagination.","operationId":"get_market_info","parameters":[{"name":"market_addr","in":"query","description":"Market address to filter by","required":false,"schema":{"type":["string","null"]},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"symbol","in":"query","description":"Market symbol to filter by","required":false,"schema":{"type":["string","null"]},"example":"ETH-USD"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved market information","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MarketResponse"}}}}},"400":{"description":"Bad request - Invalid parameters"},"500":{"description":"Internal server error"}}}},"/api/v1/orders":{"get":{"tags":["Market"],"summary":"Get orders","description":"Retrieves a list of all orders in the specified market. Orders can be filtered by side (buy/sell).","operationId":"list_orders","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"side","in":"query","required":false,"schema":{"type":["string","null"]},"example":"buy"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"}}}}},"500":{"description":"Internal server error"}}}},"/api/v1/user/fills":{"get":{"tags":["User"],"summary":"Get user fills","description":"Retrieves a list of fills (executed trades) for the authenticated user. Fills can be filtered by market address.","operationId":"list_fills","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of fills","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FillResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/intent":{"post":{"tags":["User"],"summary":"Send a new intent","description":"Send a new intent (create orders, cancel, assign leverage, etc). The intent must have valid signature and unique nonce.","operationId":"send_intent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendIntentParams"}}},"required":true},"responses":{"200":{"description":"Intent sent successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendIntentResponse"}}}},"400":{"description":"Invalid intent parameters"},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/intent/commit":{"post":{"tags":["User"],"summary":"Send intent and wait for commitment","description":"Send a new intent and wait for it to be committed or rejected","operationId":"send_intent_with_commit","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendIntentParams"}}},"required":true},"responses":{"200":{"description":"Intent committed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendIntentWithCommitResponse"}}}},"400":{"description":"Invalid intent parameters"},"401":{"description":"Unauthorized"},"408":{"description":"Timeout waiting for commitment"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/leverage":{"get":{"tags":["User"],"summary":"Get user leverage","description":"Retrieves the current leverage setting for the authenticated user in a specific market. If not set, returns the maximum leverage allowed.","operationId":"get_leverage","parameters":[{"name":"market_addr","in":"query","description":"The address of the market for which the preferred leverage is set","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"}],"responses":{"200":{"description":"Successfully retrieved user leverage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeverageResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["User"],"summary":"Set user leverage","description":"Set the preferred leverage for the authenticated user in a specific market.","operationId":"set_leverage","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetUserLeverageParams"}}},"required":true},"responses":{"200":{"description":"Successfully set of preferred leverage","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeverageResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/orders":{"get":{"tags":["User"],"summary":"Get user orders","description":"Retrieves a list of orders created by the authenticated user. Orders can be filtered by market address and side.","operationId":"list_orders","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"side","in":"query","required":false,"schema":{"type":["string","null"]},"example":"buy"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/portfolio":{"get":{"tags":["User"],"summary":"Get user portfolio","description":"Retrieves complete portfolio information for the authenticated user, including all positions and vault balances.","operationId":"get_portfolio","responses":{"200":{"description":"Successfully retrieved user portfolio","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortfolioResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/positions":{"get":{"tags":["User"],"summary":"Get user positions","description":"Retrieves a list of positions held by the authenticated user. Positions can be filtered by market address.","operationId":"list_positions","parameters":[{"name":"market_addr","in":"query","required":false,"schema":{"type":["string","null"]},"example":"0xa4ed366dd04352b3fc23d2a0e49a25029a2f1cc7cad0e96557bd2005c7b9828e"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of positions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PositionResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/vaults":{"get":{"tags":["User"],"summary":"Get user vaults","description":"Retrieves a list of vaults associated with the authenticated user. Vaults are used to store and manage user's assets.","operationId":"list_vaults","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of vaults","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VaultResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/withdrawals":{"get":{"tags":["Transaction"],"summary":"Get withdrawals","description":"Retrieves a list of withdrawals based on filter criteria. Can filter by user address, vault address, asset address, and version range.","operationId":"list_withdrawals","parameters":[{"name":"user_addr","in":"query","description":"User address to filter withdrawals by","required":false,"schema":{"type":["string","null"]},"example":"0x1234567890abcdef..."},{"name":"vault_addr","in":"query","description":"Vault address to filter withdrawals by","required":false,"schema":{"type":["string","null"]},"example":"0xabcdef1234567890..."},{"name":"asset_addr","in":"query","description":"Asset address to filter withdrawals by","required":false,"schema":{"type":["string","null"]},"example":"0x9876543210fedcba..."},{"name":"start_version","in":"query","description":"Start version for filtering (inclusive)","required":false,"schema":{"type":["integer","null"],"format":"int64","minimum":0},"example":1000},{"name":"end_version","in":"query","description":"End version for filtering (inclusive)","required":false,"schema":{"type":["integer","null"],"format":"int64","minimum":0},"example":2000},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of withdrawals","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WithdrawResponse"}}}}},"400":{"description":"Bad request - Invalid parameters"},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"ActionPayload":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/OrderCreateAction"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["order_create"]}}}]},{"allOf":[{"$ref":"#/components/schemas/OrderCancelAction"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["order_cancel"]}}}]},{"allOf":[{"$ref":"#/components/schemas/LeverageAssignAction"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["leverage_assign"]}}}]}]},"AuthorizeParams":{"type":"object","required":["signature","public_key"],"properties":{"public_key":{"type":"string","example":"0xa9d81da788977638194c857b918f12ff2233c7a86e82b44705761b2d02426f6d"},"signature":{"type":"string","example":"0xf5ec808e52d014f5193eccf680acf84c6256bdddb0159088e7cb18d74b9c590b92eb4381e10307fccc0868612993dfb9a542257aab22d7a3decfda33045fb905"}}},"AuthorizeResponse":{"type":"object","required":["token"],"properties":{"token":{"type":"string"}}},"CandleResponse":{"type":"object","required":["timestamp","open","high","low","close","volume","count"],"properties":{"close":{"type":"number","format":"double","description":"Closing price","example":48800.0},"count":{"type":"integer","format":"int64","description":"Number of trades in the period","example":123,"minimum":0},"high":{"type":"number","format":"double","description":"Highest price in the period","example":49200.0},"low":{"type":"number","format":"double","description":"Lowest price in the period","example":48100.0},"open":{"type":"number","format":"double","description":"Opening price","example":48500.0},"timestamp":{"type":"integer","format":"int64","description":"Unix timestamp for the candle open time","example":1640995200},"volume":{"type":"integer","format":"int64","description":"Total volume traded in the period","example":1250000,"minimum":0}}},"DepositResponse":{"type":"object","required":["id","version","root_addr","user_addr","vault_addr","amount","balance","asset_addr","last_updated","created_at","updated_at"],"properties":{"amount":{"type":"integer","format":"int64","description":"Amount deposited","example":1000},"asset_addr":{"type":"string","description":"Asset address","example":"0x9876543210fedcba..."},"balance":{"type":"integer","format":"int64","description":"New balance after deposit","example":5000},"created_at":{"type":"string","format":"date-time","description":"When the deposit record was created","example":"2024-01-01T12:00:00Z"},"id":{"type":"integer","format":"int32","description":"Deposit ID","example":123},"last_updated":{"type":"string","format":"date-time","description":"When the deposit was last updated","example":"2024-01-01T12:00:00Z"},"root_addr":{"type":"string","description":"Root account address (for sub-accounts)","example":"0x1234567890abcdef..."},"updated_at":{"type":"string","format":"date-time","description":"When the deposit record was last modified","example":"2024-01-01T12:00:00Z"},"user_addr":{"type":"string","description":"User address who made the deposit","example":"0x1234567890abcdef..."},"vault_addr":{"type":"string","description":"Vault address where deposit was made","example":"0xabcdef1234567890..."},"version":{"type":"integer","format":"int64","description":"Transaction version","example":12345}}},"FillResponse":{"type":"object","required":["sid","side","size","price","value","fee","taker_order_sid","taker_addr","maker_order_sid","maker_addr","market_addr","seq","timestamp"],"properties":{"fee":{"type":"integer","format":"int64","minimum":0},"maker_addr":{"type":"string","description":"The address of the maker"},"maker_order_sid":{"type":"string","description":"The order sid of the maker"},"market_addr":{"type":"string","description":"The address of the market"},"price":{"type":"integer","format":"int64","minimum":0},"seq":{"type":"integer","format":"int64","description":"Sequence number of the execution where this fill was created","minimum":0},"sid":{"type":"string","description":"The uniq identifier of the fill used in the settler"},"side":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0},"taker_addr":{"type":"string","description":"The address of the taker"},"taker_order_sid":{"type":"string","description":"The order sid of the taker"},"timestamp":{"type":"integer","format":"int64","description":"The timestamp of the execution where this fill was created","minimum":0},"value":{"type":"integer","format":"int64","minimum":0}}},"FundingRateResponse":{"type":"object","required":["market_addr","symbol","funding_rate_percentage","funding_rate_raw","mark_price","oracle_price","premium_rate_percentage","next_funding_time","funding_interval_seconds","time_to_next_funding_seconds","funding_index","last_updated"],"properties":{"funding_index":{"type":"integer","format":"int64","description":"Current funding index","example":1000000000000000000,"minimum":0},"funding_interval_seconds":{"type":"integer","format":"int64","description":"Funding interval in seconds","example":28800,"minimum":0},"funding_rate_percentage":{"type":"number","format":"double","description":"Current funding rate as a percentage (e.g., 0.01 = 1%)","example":0.0001},"funding_rate_raw":{"type":"integer","format":"int64","description":"Funding rate in raw format (scaled)","example":1000000000000000},"last_updated":{"type":"string","format":"date-time","description":"Last updated timestamp","example":"2024-01-01T12:00:00Z"},"mark_price":{"type":"integer","format":"int64","description":"Current mark price","example":65000000000,"minimum":0},"market_addr":{"type":"string","description":"Market address","example":"0x1234567890abcdef..."},"next_funding_time":{"type":"string","format":"date-time","description":"Next funding time (timestamp)","example":"2024-01-01T16:00:00Z"},"oracle_price":{"type":"integer","format":"int64","description":"Current oracle price","example":64950000000,"minimum":0},"premium_rate_percentage":{"type":"number","format":"double","description":"Premium rate (mark - oracle) / oracle","example":0.0008},"symbol":{"type":"string","description":"Market symbol","example":"BTC-USD"},"time_to_next_funding_seconds":{"type":"integer","format":"int64","description":"Time until next funding in seconds","example":14400,"minimum":0}}},"IntentOutput":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/OrderCreateIntentOutput"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["order_create"]}}}]},{"allOf":[{"$ref":"#/components/schemas/OrderCancelIntentOutput"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["order_cancel"]}}}]},{"allOf":[{"$ref":"#/components/schemas/LeverageAssignIntentOutput"},{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["leverage_assign"]}}}]}]},"LeverageAssignAction":{"type":"object","required":["leverage","market_addr"],"properties":{"leverage":{"type":"integer","format":"int64","minimum":0},"market_addr":{"type":"string"}}},"LeverageAssignIntentOutput":{"type":"object","required":["sid"],"properties":{"sid":{"type":"string"}}},"LeverageResponse":{"type":"object","required":["leverage","market_addr"],"properties":{"leverage":{"type":"integer","format":"int64","description":"The current leverage setting for the user in this market","example":10,"minimum":0},"market_addr":{"type":"string","description":"The address of the market for which the preferred leverage is set","example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"}}},"MarketResponse":{"type":"object","required":["addr","symbol","base_addr","base_decimals","quote_addr","quote_decimals","min_order_size","max_leverage","initial_margin_ratio","maintenance_margin_ratio","mark_price","oracle_price","open_interest","funding_index","funding_epoch","root","epoch","created_at","updated_at"],"properties":{"addr":{"type":"string","description":"The address of the market"},"base_addr":{"type":"string","description":"The address of the base token"},"base_decimals":{"type":"integer","format":"int32","description":"Base decimals","minimum":0},"created_at":{"type":"string","format":"date-time"},"epoch":{"type":"integer","format":"int64","description":"Epoch of the last update","minimum":0},"funding_epoch":{"type":"integer","format":"int64","description":"The funding epoch of the market","minimum":0},"funding_index":{"type":"integer","format":"int64","description":"The funding index of the market","minimum":0},"initial_margin_ratio":{"type":"integer","format":"int64","description":"Initial margin ratio","minimum":0},"maintenance_margin_ratio":{"type":"integer","format":"int64","description":"Maintenance margin ratio","minimum":0},"mark_price":{"type":"integer","format":"int64","description":"Final mark price used for liquidation/pnl","minimum":0},"max_leverage":{"type":"integer","format":"int64","description":"Max leverage available on this market","minimum":0},"min_order_size":{"type":"integer","format":"int64","description":"Minimum order size","minimum":0},"open_interest":{"type":"integer","format":"int64","description":"Total open interest","minimum":0},"oracle_price":{"type":"integer","format":"int64","description":"Raw price from the oracle/cex","minimum":0},"quote_addr":{"type":"string","description":"The address of the quote token"},"quote_decimals":{"type":"integer","format":"int32","description":"Quote decimals","minimum":0},"root":{"type":"string","description":"Merkle root of the market position tree"},"symbol":{"type":"string","description":"The symbol of the market"},"updated_at":{"type":"string","format":"date-time"}}},"MarketStatsResponse":{"type":"object","required":["market_addr","volume_24h","trades_24h"],"properties":{"current_price":{"type":["number","null"],"format":"double"},"high_24h":{"type":["number","null"],"format":"double"},"low_24h":{"type":["number","null"],"format":"double"},"market_addr":{"type":"string"},"price_24h_ago":{"type":["number","null"],"format":"double"},"price_change_24h":{"type":["number","null"],"format":"double"},"trades_24h":{"type":"integer","format":"int64","minimum":0},"volume_24h":{"type":"integer","format":"int64","minimum":0}}},"OrderCancel":{"type":"object","required":["sid"],"properties":{"sid":{"type":"string"}}},"OrderCancelAction":{"type":"object","required":["cancels"],"properties":{"cancels":{"type":"array","items":{"$ref":"#/components/schemas/OrderCancel"}}}},"OrderCancelIntentOutput":{"type":"object","required":["outputs"],"properties":{"outputs":{"type":"array","items":{"$ref":"#/components/schemas/OrderCancelOutput"}}}},"OrderCancelOutput":{"type":"object","required":["sid"],"properties":{"sid":{"type":"string"}}},"OrderCreate":{"type":"object","required":["side","size","price","leverage","type","market_addr"],"properties":{"leverage":{"type":"integer","format":"int64","minimum":0},"market_addr":{"type":"string","description":"The address of the market"},"price":{"type":"integer","format":"int64","minimum":0},"side":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0},"type":{"type":"string","description":"The type of the order (limit, market, etc.)"}}},"OrderCreateAction":{"type":"object","required":["orders"],"properties":{"orders":{"type":"array","items":{"$ref":"#/components/schemas/OrderCreate"}}}},"OrderCreateIntentOutput":{"type":"object","required":["outputs"],"properties":{"outputs":{"type":"array","items":{"$ref":"#/components/schemas/OrderCreateOutput"}}}},"OrderCreateOutput":{"type":"object","required":["sid"],"properties":{"sid":{"type":"string"}}},"OrderResponse":{"type":"object","required":["sid","side","size","price","leverage","type","status","user_addr","market_addr","seq","timestamp"],"properties":{"leverage":{"type":"integer","format":"int64","minimum":0},"market_addr":{"type":"string","description":"The address of the market"},"price":{"type":"integer","format":"int64","minimum":0},"seq":{"type":"integer","format":"int64","description":"Sequence number of the action batch where this order was created","minimum":0},"sid":{"type":"string","description":"The uniq identifier of the order used in the settler"},"side":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0},"status":{"type":"string","description":"The status of the order (created, placed, cancelled, rejected, filled, partial_filled, etc.)"},"timestamp":{"type":"integer","format":"int64","description":"The timestamp of the action batch where this order was created","minimum":0},"type":{"type":"string","description":"The type of the order (limit, market, etc.)"},"user_addr":{"type":"string","description":"The address of the user"}}},"PortfolioPosition":{"type":"object","required":["sid","market_addr","size","price","margin","funding_index","epoch","seq","timestamp"],"properties":{"epoch":{"type":"integer","format":"int64","description":"Position epoch","example":100,"minimum":0},"funding_index":{"type":"integer","format":"int64","description":"Funding index","example":1000,"minimum":0},"margin":{"type":"integer","format":"int64","description":"Margin allocated to this position","example":5000,"minimum":0},"market_addr":{"type":"string","description":"Market address","example":"0x42f1ee729364e2095a2f08019a56b310ba8980288dd1c6bbbd769f19182c692c"},"price":{"type":"integer","format":"int64","description":"Average entry price","example":50000,"minimum":0},"seq":{"type":"integer","format":"int64","description":"Sequence number","example":12345,"minimum":0},"sid":{"type":"string","description":"Position ID","example":"pos_123"},"size":{"type":"integer","format":"int64","description":"Position size (positive for long, negative for short)","example":1000},"timestamp":{"type":"integer","format":"int64","description":"Position timestamp","example":1640995200,"minimum":0}}},"PortfolioResponse":{"type":"object","required":["user_addr","positions","vault_balances","summary"],"properties":{"positions":{"type":"array","items":{"$ref":"#/components/schemas/PortfolioPosition"},"description":"List of all user's positions"},"summary":{"$ref":"#/components/schemas/PortfolioSummary","description":"Portfolio summary"},"user_addr":{"type":"string","description":"User's address","example":"0x1234567890abcdef..."},"vault_balances":{"type":"array","items":{"$ref":"#/components/schemas/PortfolioVault"},"description":"List of all user's vault balances"}}},"PortfolioSummary":{"type":"object","required":["total_positions","total_vaults","total_balance","total_margin_used","total_available_balance"],"properties":{"total_available_balance":{"type":"integer","format":"int64","description":"Total available balance across all vaults","example":17500,"minimum":0},"total_balance":{"type":"integer","format":"int64","description":"Total balance (estimated in USD)","example":25000,"minimum":0},"total_margin_used":{"type":"integer","format":"int64","description":"Total margin used across all positions","example":7500,"minimum":0},"total_positions":{"type":"integer","description":"Total number of open positions","example":3,"minimum":0},"total_vaults":{"type":"integer","description":"Total number of vaults","example":2,"minimum":0}}},"PortfolioVault":{"type":"object","required":["id","asset_addr","balance"],"properties":{"asset_addr":{"type":"string","description":"Asset address","example":"0x9876543210fedcba..."},"balance":{"type":"integer","format":"int64","description":"Current balance","example":10000,"minimum":0},"id":{"type":"integer","format":"int32","description":"Vault ID","example":"1"}}},"PositionResponse":{"type":"object","required":["sid","size","price","margin","funding_index","epoch","seq","timestamp"],"properties":{"epoch":{"type":"integer","format":"int64","minimum":0},"funding_index":{"type":"integer","format":"int64","minimum":0},"margin":{"type":"integer","format":"int64","minimum":0},"price":{"type":"integer","format":"int64","minimum":0},"seq":{"type":"integer","format":"int64","description":"Sequence number of the execution where this position was updated","minimum":0},"sid":{"type":"string","description":"The address of the user vault"},"size":{"type":"integer","format":"int64"},"timestamp":{"type":"integer","format":"int64","description":"The timestamp of the execution where this position was updated","minimum":0}}},"SendIntentParams":{"type":"object","required":["payload","nonce","signature"],"properties":{"nonce":{"type":"integer","format":"int64","default":0,"minimum":0},"payload":{"$ref":"#/components/schemas/ActionPayload"},"signature":{"type":"string","example":"0x3c0fc5e16a720127bbd3a3b017363a419c41bed70190a2d016e71a9ab5091eb4c558660c4695701bb7a531c86ce0d06301d286e983b6d9b7e0277a87b1512301"}}},"SendIntentResponse":{"type":"object","required":["output","seq","version","timestamp"],"properties":{"output":{"$ref":"#/components/schemas/IntentOutput"},"seq":{"type":"integer","format":"int64","minimum":0},"timestamp":{"type":"integer","format":"int64","minimum":0},"version":{"type":"integer","format":"int64","minimum":0}}},"SendIntentWithCommitResponse":{"type":"object","required":["output","sid","status"],"properties":{"error_message":{"type":["string","null"]},"output":{"$ref":"#/components/schemas/IntentOutput"},"seq":{"type":["integer","null"],"format":"int64","minimum":0},"sid":{"type":"string"},"status":{"type":"integer","format":"int32","minimum":0},"timestamp":{"type":["integer","null"],"format":"int64","minimum":0},"version":{"type":["integer","null"],"format":"int64","minimum":0}}},"SetUserLeverageParams":{"type":"object","required":["market_addr","leverage"],"properties":{"leverage":{"type":"integer","format":"int64","description":"The preferred leverage value to set for the user in this market","minimum":0},"market_addr":{"type":"string","description":"The address of the market for which the preferred leverage is set"}}},"VaultResponse":{"type":"object","required":["addr","amount","asset_addr","user_addr","created_at","updated_at"],"properties":{"addr":{"type":"string","description":"The address of the user vault"},"amount":{"type":"integer","format":"int64","minimum":0},"asset_addr":{"type":"string","description":"The address of the asset"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"user_addr":{"type":"string","description":"The address of the user"}}},"WithdrawResponse":{"type":"object","required":["id","version","root_addr","user_addr","vault_addr","amount","balance","asset_addr","last_updated","created_at","updated_at"],"properties":{"amount":{"type":"integer","format":"int64","description":"Amount withdrawn","example":1000},"asset_addr":{"type":"string","description":"Asset address","example":"0x9876543210fedcba..."},"balance":{"type":"integer","format":"int64","description":"New balance after withdrawal","example":4000},"created_at":{"type":"string","format":"date-time","description":"When the withdrawal record was created","example":"2024-01-01T12:00:00Z"},"fee":{"type":["integer","null"],"format":"int64","description":"Withdrawal fee (if any)","example":10},"id":{"type":"integer","format":"int32","description":"Withdrawal ID","example":123},"last_updated":{"type":"string","format":"date-time","description":"When the withdrawal was last updated","example":"2024-01-01T12:00:00Z"},"root_addr":{"type":"string","description":"Root account address (for sub-accounts)","example":"0x1234567890abcdef..."},"updated_at":{"type":"string","format":"date-time","description":"When the withdrawal record was last modified","example":"2024-01-01T12:00:00Z"},"user_addr":{"type":"string","description":"User address who made the withdrawal","example":"0x1234567890abcdef..."},"vault_addr":{"type":"string","description":"Vault address where withdrawal was made","example":"0xabcdef1234567890..."},"version":{"type":"integer","format":"int64","description":"Transaction version","example":12345}}}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer"}}}, "servers": [{"url": "https://api.ekiden.fi"}]}