{"openapi":"3.1.0","info":{"title":"ekiden-gateway-api","description":"","license":{"name":""},"version":"0.1.0"},"paths":{"/api/v1/authorize":{"post":{"tags":["Auth"],"summary":"Authorize","description":"Authenticates a user and generates a JWT token for subsequent API calls. The user must provide a valid Ed25519 signature for message `AUTHORIZE` and public key. If the user doesn't exist, a new user account will be created.","operationId":"authorize","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeParams"}}},"required":true},"responses":{"200":{"description":"Successfully authorized and token generated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeResponse"}}}},"400":{"description":"Invalid signature or public key"},"500":{"description":"Internal server error"}}}},"/api/v1/fills":{"get":{"tags":["Market"],"summary":"Get recent fills","description":"Retrieves a list of recent fills (executed trades) in the specified market.","operationId":"list_fills","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of fills","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FillResponse"}}}}},"500":{"description":"Internal server error"}}}},"/api/v1/orders":{"get":{"tags":["Market"],"summary":"Get orders","description":"Retrieves a list of all orders in the specified market. Orders can be filtered by side (buy/sell).","operationId":"list_orders","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"side","in":"query","required":false,"schema":{"type":["string","null"]},"example":"buy"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"}}}}},"500":{"description":"Internal server error"}}}},"/api/v1/user/fills":{"get":{"tags":["User"],"summary":"Get user fills","description":"Retrieves a list of fills (executed trades) for the authenticated user. Fills can be filtered by market address.","operationId":"list_fills","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of fills","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FillResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/orders":{"get":{"tags":["User"],"summary":"Get user orders","description":"Retrieves a list of orders created by the authenticated user. Orders can be filtered by market address and side.","operationId":"list_orders","parameters":[{"name":"market_addr","in":"query","required":true,"schema":{"type":"string"},"example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},{"name":"side","in":"query","required":false,"schema":{"type":["string","null"]},"example":"buy"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]},"post":{"tags":["User"],"summary":"Create new order","description":"Creates a new order in the specified market. The order must have valid size and price values greater than zero.","operationId":"create_order","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderParams"}}},"required":true},"responses":{"200":{"description":"Order created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderResponse"}}}},"400":{"description":"Invalid order parameters - Size and price must be greater than zero"},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"404":{"description":"Market not found"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/positions":{"get":{"tags":["User"],"summary":"Get user positions","description":"Retrieves a list of positions held by the authenticated user. Positions can be filtered by market address.","operationId":"list_positions","parameters":[{"name":"market_addr","in":"query","required":false,"schema":{"type":["string","null"]},"example":"0xa4ed366dd04352b3fc23d2a0e49a25029a2f1cc7cad0e96557bd2005c7b9828e"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of positions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PositionResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}},"/api/v1/user/vaults":{"get":{"tags":["User"],"summary":"Get user vaults","description":"Retrieves a list of vaults associated with the authenticated user. Vaults are used to store and manage user's assets.","operationId":"list_vaults","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"minimum":0}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"minimum":0}}],"responses":{"200":{"description":"Successfully retrieved list of vaults","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VaultResponse"}}}}},"401":{"description":"Unauthorized - Invalid or missing authentication token"},"500":{"description":"Internal server error"}},"security":[{"bearer_auth":[]}]}}},"components":{"schemas":{"AuthorizeParams":{"type":"object","required":["signature","public_key"],"properties":{"public_key":{"type":"string","example":"0xa9d81da788977638194c857b918f12ff2233c7a86e82b44705761b2d02426f6d"},"signature":{"type":"string","example":"0xf5ec808e52d014f5193eccf680acf84c6256bdddb0159088e7cb18d74b9c590b92eb4381e10307fccc0868612993dfb9a542257aab22d7a3decfda33045fb905"}}},"AuthorizeResponse":{"type":"object","required":["token"],"properties":{"token":{"type":"string"}}},"CreateOrderParams":{"type":"object","required":["market_addr","side","size","price","type","nonce","signature"],"properties":{"market_addr":{"type":"string","example":"0x2245549db5a39c5644f4ff69aaab297df252649b8b59e18a9130d48f01d09ea"},"nonce":{"type":"integer","format":"int64","default":0,"minimum":0},"price":{"type":"number","format":"double","default":0,"example":50000},"side":{"type":"string","example":"buy"},"signature":{"type":"string","example":"3c0fc5e16a720127bbd3a3b017363a419c41bed70190a2d016e71a9ab5091eb4c558660c4695701bb7a531c86ce0d06301d286e983b6d9b7e0277a87b1512301"},"size":{"type":"number","format":"double","default":0,"example":1},"type":{"type":"string","example":"market"}}},"CreateOrderResponse":{"type":"object","required":["sid"],"properties":{"sid":{"type":"string","description":"The uniq identifier of the order used in the settler"}}},"FillResponse":{"type":"object","required":["sid","side","size","price","value","fee","taker_order_sid","taker_addr","maker_order_sid","maker_addr","market_addr","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"fee":{"type":"integer","format":"int64","minimum":0},"maker_addr":{"type":"string","description":"The address of the maker"},"maker_order_sid":{"type":"string","description":"The order sid of the maker"},"market_addr":{"type":"string","description":"The address of the market"},"price":{"type":"integer","format":"int64","minimum":0},"sid":{"type":"string","description":"The uniq identifier of the fill used in the settler"},"side":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0},"taker_addr":{"type":"string","description":"The address of the taker"},"taker_order_sid":{"type":"string","description":"The order sid of the taker"},"updated_at":{"type":"string","format":"date-time"},"value":{"type":"integer","format":"int64","minimum":0}}},"OrderResponse":{"type":"object","required":["sid","side","size","price","type","status","user_addr","market_addr","nonce","signature","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"market_addr":{"type":"string","description":"The address of the market"},"nonce":{"type":"integer","format":"int64","description":"Number to prevent replay attacks","minimum":0},"price":{"type":"integer","format":"int64","minimum":0},"sid":{"type":"string","description":"The uniq identifier of the order used in the settler"},"side":{"type":"string"},"signature":{"type":"string","description":"Signature of the order from the user"},"size":{"type":"integer","format":"int64","minimum":0},"status":{"type":"string","description":"The status of the order (open, filled, partial_filled, etc.)"},"type":{"type":"string","description":"The type of the order (limit, market, etc.)"},"updated_at":{"type":"string","format":"date-time"},"user_addr":{"type":"string","description":"The address of the user"}}},"PositionResponse":{"type":"object","required":["sid","size","price","margin","funding_index","epoch","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"epoch":{"type":"integer","format":"int64","minimum":0},"funding_index":{"type":"integer","format":"int64","minimum":0},"margin":{"type":"integer","format":"int64","minimum":0},"price":{"type":"integer","format":"int64","minimum":0},"sid":{"type":"string","description":"The address of the user vault"},"size":{"type":"integer","format":"int64"},"updated_at":{"type":"string","format":"date-time"}}},"VaultResponse":{"type":"object","required":["addr","amount","asset_addr","user_addr","created_at","updated_at"],"properties":{"addr":{"type":"string","description":"The address of the user vault"},"amount":{"type":"integer","format":"int64","minimum":0},"asset_addr":{"type":"string","description":"The address of the asset"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"user_addr":{"type":"string","description":"The address of the user"}}}}}}